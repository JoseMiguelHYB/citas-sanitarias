<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Registro - Citas Sanitarias</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

	<style>
		html,
		body {
			height: 100%;
			margin: 0;
			font-family: 'Poppins', sans-serif;
			background-color: #f8f9fa;
			color: #212529;
			overflow: hidden;
			transition: background-color 0.3s ease, color 0.3s ease;
		}

		html.dark-mode,
		html.dark-mode body {
			background-color: #121212;
			color: #eee;
		}

		.container-login {
			max-width: 920px;
			background-color: #fff;
			border: 1px solid #dee2e6;
			border-radius: 10px;
			padding: 1rem 1.5rem;
			margin: 1rem auto;
			box-shadow: 0 6px 12px rgba(0, 0, 0, 0.05);
			overflow: hidden;
		}

		h2 {
			text-align: center;
			font-weight: 600;
			font-size: 1.4rem;
			margin-bottom: 1.2rem;
		}

		label {
			font-weight: 500;
			font-size: 0.85rem;
			margin-bottom: 0.2rem;
		}

		.form-control {
			border-radius: 0.4rem;
			padding: 0.5rem;
			font-size: 0.85rem;
		}

		html.dark-mode .form-control {
			background-color: #2c2c2c;
			border-color: #444;
			color: #fff;
		}

		.btn-main {
			background-color: rgb(0, 0, 0); /* Gris oscuro neutro */
			color: #fff;
			border: none;
			width: 100%;
			font-weight: 600;
			font-size: 0.95rem;
			padding: 0.6rem;
			border-radius: 0.4rem;
		}

		.btn-main:hover {
			background-color: #23272b;
		}

		.link-register {
			color: #007baf;
			text-decoration: none;
		}

		.link-register:hover {
			text-decoration: underline;
			color: #005f8e;
		}

		.dark-toggle {
			position: absolute;
			top: 1rem;
			right: 1rem;
		}

		.form-check-input {
			width: 2rem;
			height: 1rem;
			cursor: pointer;
		}

		.form-check-label {
			font-size: 1.2rem;
			cursor: pointer;
		}

		.text-center a {
			color: #007BFF;
			text-decoration: none;
		}

		.text-center a:hover {
			text-decoration: underline;
		}

		.header-banner {
			background-color: #00a99d; /* color relajante tipo agua */  
			color: white;
			padding: 0.7rem;
			text-align: center;
			font-size: 0.85rem;
			font-weight: 500;
			letter-spacing: 0.3px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		}

		.link-register {
			color: #00a99d;
			text-decoration: none;
		}

		.link-register:hover {
			text-decoration: underline;
		}

		.row.g-3>.col-md-4 {
			margin-bottom: 0.5rem;
		}

		@media (max-height: 800px),
		(max-width: 900px) {
			.container-login {
				max-width: 800px;
				padding: 1rem;
			}

			.col-md-4 {
				width: 50%;
			}
		}

		@media (max-height: 600px),
		(max-width: 600px) {
			.col-md-4 {
				width: 100%;
			}
		}
	</style>
</head>

<body>
	<div class="header-banner">
		<strong>GestiÃ³n Sanitaria Centralizada</strong> â€“ Accede a tus citas desde cualquier lugar, en segundos.
	</div>

	<div class="dark-toggle">
		<div class="form-check form-switch">
			<input class="form-check-input" type="checkbox" id="darkSwitch">
			<label class="form-check-label" for="darkSwitch">ðŸŒ™</label>
		</div>
	</div>

	<!-- Toast de error -->
	<div class="toast-container position-fixed top-0 end-0 p-3">
	    <div th:if="${errorMessage}" 
	         class="toast align-items-center text-bg-danger border-0" 
	         role="alert" 
	         aria-live="assertive" 
	         aria-atomic="true" 
	         data-bs-delay="5000" 
	         id="errorToast">
	        <div class="d-flex">
	            <div class="toast-body">
	                <span th:text="${errorMessage}"></span>
	            </div>
	            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
	        </div>
	    </div>
	</div>


	<div class="container-login">
		<h2>Registro de Paciente</h2>

		<form th:action="@{/pacientes/register}" th:object="${paciente}" method="post">
			<div class="row g-3">
				<div class="col-md-4">
					<label for="username">User Name</label>
					<input type="text" th:field="*{username}" id="username" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="nombre">Nombres</label>
					<input type="text" th:field="*{nombre}" id="nombre" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="apellido">Apellidos</label>
					<input type="text" th:field="*{apellido}" id="apellido" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="codigoIdentificacion">CÃ³digo IdentificaciÃ³n</label>
					<input type="text" th:field="*{codigoIdentificacion}" id="codigoIdentificacion" class="form-control"
						required>
				</div>

				<div class="col-md-4">
					<label for="password">ContraseÃ±a</label>
					<input type="password" th:field="*{password}" id="password" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="dni">DNI</label>
					<input type="text" th:field="*{dni}" id="dni" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="fechaNacimiento">Fecha de Nacimiento</label>
					<input type="date" th:field="*{fechaNacimiento}" id="fechaNacimiento" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="telefono">TelÃ©fono</label>
					<input type="tel" th:field="*{telefono}" id="telefono" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="email">Email</label>
					<input type="email" th:field="*{email}" id="email" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="direccion">DirecciÃ³n</label>
					<input type="text" th:field="*{direccion}" id="direccion" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="localidad">Localidad</label>
					<input type="text" th:field="*{localidad}" id="localidad" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="codigoPostal">CÃ³digo Postal</label>
					<input type="text" th:field="*{codigoPostal}" id="codigoPostal" class="form-control" required>
				</div>

				<div class="col-md-4">
					<label for="genero">GÃ©nero</label>
					<select th:field="*{genero}" id="genero" class="form-control" required>
						<option value="">Seleccione...</option>
						<option value="M">Masculino</option>
						<option value="F">Femenino</option>
						<option value="O">Otro</option>
					</select>
				</div>

				<div class="col-md-4">
					<label for="numeroSeguridadSocial">NÂº Seguridad Social</label>
					<input type="text" th:field="*{numeroSeguridadSocial}" id="numeroSeguridadSocial"
						class="form-control" required>
				</div>



				<!--ELIMINARLO ESTE CAMPO 
				<div class="col-md-4">
					<label for="activo">Â¿Activo?</label>
					<select th:field="*{activo}" id="activo" class="form-control" required>
						<option value="true">SÃ­</option>
						<option value="false">No</option>
					</select>
				</div>-->
			</div>

			<div class="mt-3">
				<button type="submit" class="btn-main">Registrarse</button>
			</div>
		</form>

		<div class="text-center mt-2">
			<p>Â¿Ya tienes una cuenta?
				<a th:href="@{/pacientes/login}" class="fw-semibold link-register">Inicia sesiÃ³n</a>
			</p>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const errorToastEl = document.getElementById('errorToast');
			if (errorToastEl) {
				const errorToast = new bootstrap.Toast(errorToastEl);
				errorToast.show();
			}

			const darkSwitch = document.getElementById('darkSwitch');
			const html = document.documentElement;

			darkSwitch.addEventListener('change', () => {
				if (darkSwitch.checked) {
					html.classList.add('dark-mode');
					localStorage.setItem('theme', 'dark');
				} else {
					html.classList.remove('dark-mode');
					localStorage.setItem('theme', 'light');
				}
			});

			if (localStorage.getItem('theme') === 'dark') {
				darkSwitch.checked = true;
				html.classList.add('dark-mode');
			}
		});
	</script>
</body>

</html>